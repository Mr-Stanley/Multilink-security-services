{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/security-company-website/lib/mailersend.ts"],"sourcesContent":["import { MailerSend, EmailParams, Sender, Recipient } from \"mailersend\"\r\n\r\n// Initialize MailerSend client\r\nfunction getMailerSendClient() {\r\n  const apiKey = process.env.MAILERSEND_API_KEY\r\n  if (!apiKey) {\r\n    throw new Error(\"MAILERSEND_API_KEY is not configured\")\r\n  }\r\n  return new MailerSend({\r\n    apiKey: apiKey,\r\n  })\r\n}\r\n\r\nexport interface BookingEmailData {\r\n  name: string\r\n  email: string\r\n  phone: string\r\n  company?: string\r\n  service: string\r\n  preferredDate?: string\r\n  preferredTime?: string\r\n  message?: string\r\n}\r\n\r\nexport interface ContactEmailData {\r\n  name: string\r\n  email: string\r\n  phone: string\r\n  service: string\r\n  message: string\r\n}\r\n\r\nexport async function sendContactNotification(data: ContactEmailData) {\r\n  // Validate environment variables\r\n  if (!process.env.MAILERSEND_API_KEY) {\r\n    console.error(\"MAILERSEND_API_KEY is not set\")\r\n    throw new Error(\"Email service is not configured - MAILERSEND_API_KEY missing\")\r\n  }\r\n\r\n  if (!process.env.MAILERSEND_FROM_EMAIL || !process.env.MAILERSEND_TO_EMAIL) {\r\n    console.error(\"MAILERSEND_FROM_EMAIL or MAILERSEND_TO_EMAIL is not set\")\r\n    throw new Error(\"Email addresses are not configured\")\r\n  }\r\n\r\n  // Initialize MailerSend client\r\n  const mailersend = getMailerSendClient()\r\n\r\n  // Trim whitespace from email addresses\r\n  const fromEmail = process.env.MAILERSEND_FROM_EMAIL?.trim()\r\n  const toEmail = process.env.MAILERSEND_TO_EMAIL?.trim()\r\n\r\n  // Validate email format\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n  if (!fromEmail || !emailRegex.test(fromEmail)) {\r\n    throw new Error(`Invalid FROM_EMAIL format: ${fromEmail}`)\r\n  }\r\n  if (!toEmail || !emailRegex.test(toEmail)) {\r\n    throw new Error(`Invalid TO_EMAIL format: ${toEmail}`)\r\n  }\r\n\r\n  const sentFrom = new Sender(fromEmail, \"Multilink Security & Logistics LTD\")\r\n  const recipients = [new Recipient(toEmail, \"Contact Team\")]\r\n\r\n  // HTML email content\r\n  const htmlContent = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <meta charset=\"utf-8\">\r\n      <style>\r\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n        .header { background-color: #2e2d4d; color: #f5edf0; padding: 20px; border-radius: 8px 8px 0 0; }\r\n        .content { background-color: #faf4d3; padding: 20px; border-radius: 0 0 8px 8px; }\r\n        .section { margin-bottom: 20px; }\r\n        .label { font-weight: bold; color: #2e2d4d; }\r\n        .value { margin-left: 10px; }\r\n        .footer { margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd; font-size: 12px; color: #666; }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"container\">\r\n        <div class=\"header\">\r\n          <h2>New Contact Form Inquiry</h2>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"section\">\r\n            <h3>Contact Information</h3>\r\n            <p><span class=\"label\">Name:</span> <span class=\"value\">${data.name}</span></p>\r\n            <p><span class=\"label\">Email:</span> <span class=\"value\">${data.email}</span></p>\r\n            <p><span class=\"label\">Phone:</span> <span class=\"value\">${data.phone}</span></p>\r\n            <p><span class=\"label\">Service Interested In:</span> <span class=\"value\">${data.service}</span></p>\r\n          </div>\r\n          \r\n          <div class=\"section\">\r\n            <h3>Message</h3>\r\n            <p>${data.message.replace(/\\n/g, \"<br>\")}</p>\r\n          </div>\r\n          \r\n          <div class=\"footer\">\r\n            <p>This inquiry was submitted from the MULTILINK SECURITY & Logistics LTD website contact form.</p>\r\n            <p>Please respond to the client within 24 hours.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `\r\n\r\n  // Plain text version\r\n  const textContent = `\r\nNew Contact Form Inquiry\r\n\r\nContact Information:\r\n- Name: ${data.name}\r\n- Email: ${data.email}\r\n- Phone: ${data.phone}\r\n- Service Interested In: ${data.service}\r\n\r\nMessage:\r\n${data.message}\r\n\r\n---\r\nThis inquiry was submitted from the MULTILINK SECURITY & Logistics LTD website contact form.\r\nPlease respond to the client within 24 hours.\r\n  `\r\n\r\n  const emailParams = new EmailParams()\r\n    .setFrom(sentFrom)\r\n    .setTo(recipients)\r\n    .setReplyTo(sentFrom)\r\n    .setSubject(`New Contact Form Inquiry: ${data.service}`)\r\n    .setHtml(htmlContent)\r\n    .setText(textContent)\r\n\r\n  try {\r\n    const response = await mailersend.email.send(emailParams)\r\n    return response\r\n  } catch (error) {\r\n    console.error(\"Error sending email via MailerSend:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function sendBookingNotification(data: BookingEmailData) {\r\n  // Validate environment variables\r\n  if (!process.env.MAILERSEND_API_KEY) {\r\n    console.error(\"MAILERSEND_API_KEY is not set\")\r\n    throw new Error(\"Email service is not configured - MAILERSEND_API_KEY missing\")\r\n  }\r\n\r\n  if (!process.env.MAILERSEND_FROM_EMAIL || !process.env.MAILERSEND_TO_EMAIL) {\r\n    console.error(\"MAILERSEND_FROM_EMAIL or MAILERSEND_TO_EMAIL is not set\")\r\n    throw new Error(\"Email addresses are not configured\")\r\n  }\r\n\r\n  // Initialize MailerSend client\r\n  const mailersend = getMailerSendClient()\r\n\r\n  // Trim whitespace from email addresses\r\n  const fromEmail = process.env.MAILERSEND_FROM_EMAIL?.trim()\r\n  const toEmail = process.env.MAILERSEND_TO_EMAIL?.trim()\r\n\r\n  // Validate email format\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n  if (!fromEmail || !emailRegex.test(fromEmail)) {\r\n    throw new Error(`Invalid FROM_EMAIL format: ${fromEmail}`)\r\n  }\r\n  if (!toEmail || !emailRegex.test(toEmail)) {\r\n    throw new Error(`Invalid TO_EMAIL format: ${toEmail}`)\r\n  }\r\n\r\n  const sentFrom = new Sender(fromEmail, \"Multilink Security & Logistics LTD\")\r\n  const recipients = [new Recipient(toEmail, \"Booking Team\")]\r\n\r\n  // HTML email content\r\n  const htmlContent = `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <meta charset=\"utf-8\">\r\n      <style>\r\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n        .header { background-color: #2e2d4d; color: #f5edf0; padding: 20px; border-radius: 8px 8px 0 0; }\r\n        .content { background-color: #faf4d3; padding: 20px; border-radius: 0 0 8px 8px; }\r\n        .section { margin-bottom: 20px; }\r\n        .label { font-weight: bold; color: #2e2d4d; }\r\n        .value { margin-left: 10px; }\r\n        .footer { margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd; font-size: 12px; color: #666; }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"container\">\r\n        <div class=\"header\">\r\n          <h2>New Security Service Booking Request</h2>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"section\">\r\n            <h3>Client Information</h3>\r\n            <p><span class=\"label\">Name:</span> <span class=\"value\">${data.name}</span></p>\r\n            <p><span class=\"label\">Email:</span> <span class=\"value\">${data.email}</span></p>\r\n            <p><span class=\"label\">Phone:</span> <span class=\"value\">${data.phone}</span></p>\r\n            <p><span class=\"label\">Company:</span> <span class=\"value\">${data.company || \"N/A\"}</span></p>\r\n          </div>\r\n          \r\n          <div class=\"section\">\r\n            <h3>Service Details</h3>\r\n            <p><span class=\"label\">Requested Service:</span> <span class=\"value\">${data.service}</span></p>\r\n            <p><span class=\"label\">Preferred Date:</span> <span class=\"value\">${data.preferredDate || \"Not specified\"}</span></p>\r\n            <p><span class=\"label\">Preferred Time:</span> <span class=\"value\">${data.preferredTime || \"Not specified\"}</span></p>\r\n          </div>\r\n          \r\n          ${data.message ? `\r\n          <div class=\"section\">\r\n            <h3>Additional Details</h3>\r\n            <p>${data.message.replace(/\\n/g, \"<br>\")}</p>\r\n          </div>\r\n          ` : \"\"}\r\n          \r\n          <div class=\"footer\">\r\n            <p>This booking was submitted from the MULTILINK SECURITY & Logistics LTD website.</p>\r\n            <p>Please respond to the client within 24 hours.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `\r\n\r\n  // Plain text version\r\n  const textContent = `\r\nNew Security Service Booking Request\r\n\r\nClient Information:\r\n- Name: ${data.name}\r\n- Email: ${data.email}\r\n- Phone: ${data.phone}\r\n- Company: ${data.company || \"N/A\"}\r\n\r\nService Details:\r\n- Requested Service: ${data.service}\r\n- Preferred Date: ${data.preferredDate || \"Not specified\"}\r\n- Preferred Time: ${data.preferredTime || \"Not specified\"}\r\n\r\nAdditional Details:\r\n${data.message || \"No additional details provided\"}\r\n\r\n---\r\nThis booking was submitted from the MULTILINK SECURITY & Logistics LTD website.\r\nPlease respond to the client within 24 hours.\r\n  `\r\n\r\n  const emailParams = new EmailParams()\r\n    .setFrom(sentFrom)\r\n    .setTo(recipients)\r\n    .setReplyTo(sentFrom)\r\n    .setSubject(`New Booking Request: ${data.service}`)\r\n    .setHtml(htmlContent)\r\n    .setText(textContent)\r\n\r\n  try {\r\n    const response = await mailersend.email.send(emailParams)\r\n    return response\r\n  } catch (error) {\r\n    console.error(\"Error sending email via MailerSend:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,+BAA+B;AAC/B,SAAS;IACP,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB;IAC7C,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAI,0JAAU,CAAC;QACpB,QAAQ;IACV;AACF;AAqBO,eAAe,wBAAwB,IAAsB;IAClE,iCAAiC;IACjC,IAAI,CAAC,QAAQ,GAAG,CAAC,kBAAkB,EAAE;QACnC,QAAQ,KAAK,CAAC;QACd,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,qBAAqB,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,EAAE;QAC1E,QAAQ,KAAK,CAAC;QACd,MAAM,IAAI,MAAM;IAClB;IAEA,+BAA+B;IAC/B,MAAM,aAAa;IAEnB,uCAAuC;IACvC,MAAM,YAAY,QAAQ,GAAG,CAAC,qBAAqB,EAAE;IACrD,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,EAAE;IAEjD,wBAAwB;IACxB,MAAM,aAAa;IACnB,IAAI,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,YAAY;QAC7C,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,WAAW;IAC3D;IACA,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,UAAU;QACzC,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,SAAS;IACvD;IAEA,MAAM,WAAW,IAAI,sJAAM,CAAC,WAAW;IACvC,MAAM,aAAa;QAAC,IAAI,yJAAS,CAAC,SAAS;KAAgB;IAE3D,qBAAqB;IACrB,MAAM,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;oEAwB6C,EAAE,KAAK,IAAI,CAAC;qEACX,EAAE,KAAK,KAAK,CAAC;qEACb,EAAE,KAAK,KAAK,CAAC;qFACG,EAAE,KAAK,OAAO,CAAC;;;;;eAKrF,EAAE,KAAK,OAAO,CAAC,OAAO,CAAC,OAAO,QAAQ;;;;;;;;;;;EAWnD,CAAC;IAED,qBAAqB;IACrB,MAAM,cAAc,CAAC;;;;QAIf,EAAE,KAAK,IAAI,CAAC;SACX,EAAE,KAAK,KAAK,CAAC;SACb,EAAE,KAAK,KAAK,CAAC;yBACG,EAAE,KAAK,OAAO,CAAC;;;AAGxC,EAAE,KAAK,OAAO,CAAC;;;;;EAKb,CAAC;IAED,MAAM,cAAc,IAAI,2JAAW,GAChC,OAAO,CAAC,UACR,KAAK,CAAC,YACN,UAAU,CAAC,UACX,UAAU,CAAC,CAAC,0BAA0B,EAAE,KAAK,OAAO,EAAE,EACtD,OAAO,CAAC,aACR,OAAO,CAAC;IAEX,IAAI;QACF,MAAM,WAAW,MAAM,WAAW,KAAK,CAAC,IAAI,CAAC;QAC7C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,MAAM;IACR;AACF;AAEO,eAAe,wBAAwB,IAAsB;IAClE,iCAAiC;IACjC,IAAI,CAAC,QAAQ,GAAG,CAAC,kBAAkB,EAAE;QACnC,QAAQ,KAAK,CAAC;QACd,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,qBAAqB,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,EAAE;QAC1E,QAAQ,KAAK,CAAC;QACd,MAAM,IAAI,MAAM;IAClB;IAEA,+BAA+B;IAC/B,MAAM,aAAa;IAEnB,uCAAuC;IACvC,MAAM,YAAY,QAAQ,GAAG,CAAC,qBAAqB,EAAE;IACrD,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,EAAE;IAEjD,wBAAwB;IACxB,MAAM,aAAa;IACnB,IAAI,CAAC,aAAa,CAAC,WAAW,IAAI,CAAC,YAAY;QAC7C,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,WAAW;IAC3D;IACA,IAAI,CAAC,WAAW,CAAC,WAAW,IAAI,CAAC,UAAU;QACzC,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,SAAS;IACvD;IAEA,MAAM,WAAW,IAAI,sJAAM,CAAC,WAAW;IACvC,MAAM,aAAa;QAAC,IAAI,yJAAS,CAAC,SAAS;KAAgB;IAE3D,qBAAqB;IACrB,MAAM,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;oEAwB6C,EAAE,KAAK,IAAI,CAAC;qEACX,EAAE,KAAK,KAAK,CAAC;qEACb,EAAE,KAAK,KAAK,CAAC;uEACX,EAAE,KAAK,OAAO,IAAI,MAAM;;;;;iFAKd,EAAE,KAAK,OAAO,CAAC;8EAClB,EAAE,KAAK,aAAa,IAAI,gBAAgB;8EACxC,EAAE,KAAK,aAAa,IAAI,gBAAgB;;;UAG5G,EAAE,KAAK,OAAO,GAAG,CAAC;;;eAGb,EAAE,KAAK,OAAO,CAAC,OAAO,CAAC,OAAO,QAAQ;;UAE3C,CAAC,GAAG,GAAG;;;;;;;;;;EAUf,CAAC;IAED,qBAAqB;IACrB,MAAM,cAAc,CAAC;;;;QAIf,EAAE,KAAK,IAAI,CAAC;SACX,EAAE,KAAK,KAAK,CAAC;SACb,EAAE,KAAK,KAAK,CAAC;WACX,EAAE,KAAK,OAAO,IAAI,MAAM;;;qBAGd,EAAE,KAAK,OAAO,CAAC;kBAClB,EAAE,KAAK,aAAa,IAAI,gBAAgB;kBACxC,EAAE,KAAK,aAAa,IAAI,gBAAgB;;;AAG1D,EAAE,KAAK,OAAO,IAAI,iCAAiC;;;;;EAKjD,CAAC;IAED,MAAM,cAAc,IAAI,2JAAW,GAChC,OAAO,CAAC,UACR,KAAK,CAAC,YACN,UAAU,CAAC,UACX,UAAU,CAAC,CAAC,qBAAqB,EAAE,KAAK,OAAO,EAAE,EACjD,OAAO,CAAC,aACR,OAAO,CAAC;IAEX,IAAI;QACF,MAAM,WAAW,MAAM,WAAW,KAAK,CAAC,IAAI,CAAC;QAC7C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,MAAM;IACR;AACF"}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Downloads/security-company-website/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { sendContactNotification } from \"@/lib/mailersend\"\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const data = await request.json()\r\n\r\n    // Validate required fields\r\n    if (!data.name || !data.email || !data.phone || !data.message) {\r\n      return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 })\r\n    }\r\n\r\n    // Send email notification via MailerSend\r\n    try {\r\n      await sendContactNotification({\r\n        name: data.name,\r\n        email: data.email,\r\n        phone: data.phone,\r\n        service: data.service || \"General Inquiry\",\r\n        message: data.message,\r\n      })\r\n\r\n      console.log(\"Contact form notification email sent successfully\")\r\n    } catch (emailError) {\r\n      // Log the error but don't fail the request\r\n      // This allows the contact form to be submitted even if email fails\r\n      console.error(\"Failed to send contact form notification email:\", emailError)\r\n      \r\n      // In production, you might want to queue the email for retry\r\n      // or store it in a database for later processing\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: \"Contact form submitted successfully\",\r\n    })\r\n  } catch (error) {\r\n    console.error(\"Error processing contact form:\", error)\r\n    return NextResponse.json({ error: \"Failed to process contact form\" }, { status: 500 })\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,2BAA2B;QAC3B,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,OAAO,EAAE;YAC7D,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,yCAAyC;QACzC,IAAI;YACF,MAAM,IAAA,8IAAuB,EAAC;gBAC5B,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;gBACjB,OAAO,KAAK,KAAK;gBACjB,SAAS,KAAK,OAAO,IAAI;gBACzB,SAAS,KAAK,OAAO;YACvB;YAEA,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,YAAY;YACnB,2CAA2C;YAC3C,mEAAmE;YACnE,QAAQ,KAAK,CAAC,mDAAmD;QAEjE,6DAA6D;QAC7D,iDAAiD;QACnD;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiC,GAAG;YAAE,QAAQ;QAAI;IACtF;AACF"}}]
}